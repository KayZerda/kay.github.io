<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>DevLog002-Xcodeä½¿ç”¨SDL2_imageå®‰è£…é…ç½®</title>
    <url>/2021/04/14/DevLog002-Xcode%E4%BD%BF%E7%94%A8SDL2_image%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AE/</url>
    <content><![CDATA[<p>SDL2_imageæ¡†æ¶é…ç½®è¿‡ç¨‹ä¸­é‡åˆ°çš„é—®é¢˜ï¼Œä»¥åŠæˆ‘çš„æœ€ç»ˆè§£å†³æ–¹å¼ã€‚</p>
<span id="more"></span>

<h2 id="ä¸‹è½½å’Œå®‰è£…"><a href="#ä¸‹è½½å’Œå®‰è£…" class="headerlink" title="ä¸‹è½½å’Œå®‰è£…"></a>ä¸‹è½½å’Œå®‰è£…</h2><p>å…·ä½“è¿‡ç¨‹å’Œ<a href="https://fayeke.github.io/2021/04/11/DevLog001-XCode%E4%BD%BF%E7%94%A8SDL2%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AE-M1/">SDLæ¡†æ¶</a>çš„ä¸‹è½½å®‰è£…ç›¸åŒï¼Œä»<a href="http://www.libsdl.org/projects/SDL_image/">è¿™é‡Œ</a>ä¸‹è½½ç›¸åº”æ“ä½œç³»ç»Ÿçš„Development Librariesã€‚</p>
<h2 id="é‡åˆ°çš„é—®é¢˜"><a href="#é‡åˆ°çš„é—®é¢˜" class="headerlink" title="é‡åˆ°çš„é—®é¢˜"></a>é‡åˆ°çš„é—®é¢˜</h2><h3 id="èŠ¯ç‰‡æ¶æ„é—®é¢˜"><a href="#èŠ¯ç‰‡æ¶æ„é—®é¢˜" class="headerlink" title="èŠ¯ç‰‡æ¶æ„é—®é¢˜"></a>èŠ¯ç‰‡æ¶æ„é—®é¢˜</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">.&#x2F;yourProject.xcodeproj The linked and embedded framework &#39;SDL2_image.framework&#39; is missing one or more architectures required by this target: arm64.</span><br></pre></td></tr></table></figure>
<p>å…¼å®¹é—®é¢˜æ›´æ”¹è¿è¡Œæ–¹å¼ä¸ºRosettaå³å¯ã€‚<br><img src="/2021/04/14/DevLog002-Xcode%E4%BD%BF%E7%94%A8SDL2_image%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AE/image_01.png"><br><img src="/2021/04/14/DevLog002-Xcode%E4%BD%BF%E7%94%A8SDL2_image%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AE/image_02.png"></p>
<h3 id="codesigné—®é¢˜"><a href="#codesigné—®é¢˜" class="headerlink" title="codesigné—®é¢˜"></a>codesigné—®é¢˜</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">ctgmoccoynjrwpbprjqqektfmoac&#x2F;Build&#x2F;Products&#x2F;Debug&#x2F;yourProject.app&#x2F;Contents&#x2F;Frameworks&#x2F;SDL2_image.framework&#x2F;Versions&#x2F;A&#x2F;Frameworks&#x2F;webp.framework</span><br><span class="line">Command CodeSign failed with a nonzero exit code</span><br></pre></td></tr></table></figure>
<p>æœ€ç»ˆæˆ‘é€šè¿‡æ‰‹åŠ¨ç­¾åwebp.frameworkå’Œåˆ é™¤ä¸Šä¸€ç¯‡è¾“å…¥çš„Other code signing flags â€“deepè§£å†³äº†ã€‚ç½ªé­ç¥¸é¦–åº”è¯¥æ˜¯â€“deepå¯¼è‡´çš„ï¼Œåˆ é™¤åSDLæ¡†æ¶æ­£å¸¸è¿è¡Œï¼ŒSDL_imageæ¡†æ¶è¿˜æ²¡æœ‰ä½¿ç”¨ï¼Œä»…å¼•ç”¨ï¼Œç¨‹åºæ­£å¸¸è¿è¡Œã€‚</p>
<blockquote>
<p>å…³äºæ‰‹åŠ¨ç­¾åï¼Œæˆ‘å‚è€ƒäº†stackoverflowçš„<a href="https://stackoverflow.com/questions/28665772/xcode-6-1-1-cannot-codesign-code-object-is-not-signed-at-all-with-only-1-fra">è¿™ä¸ªé—®é¢˜</a>ä¸‹çš„å›ç­”ã€‚</p>
</blockquote>
<h2 id="å…¶ä»–"><a href="#å…¶ä»–" class="headerlink" title="å…¶ä»–"></a>å…¶ä»–</h2><blockquote>
<p>ç­‰æˆ‘åˆ‡å®ä½¿ç”¨SDL2_imageæ¡†æ¶åå†è¯´ã€‚</p>
</blockquote>
<h2 id="è€è§„çŸ©çš„ç¢ç¢å¿µ"><a href="#è€è§„çŸ©çš„ç¢ç¢å¿µ" class="headerlink" title="è€è§„çŸ©çš„ç¢ç¢å¿µ"></a>è€è§„çŸ©çš„ç¢ç¢å¿µ</h2><p>imageè€æ‰“æˆiamgeï¼Œä¹Ÿä¸çŸ¥é“ä¸ºä»€ä¹ˆï¼Œè¢«è‡ªå·±æ°”æ­»ã€‚</p>
]]></content>
      <categories>
        <category>åŸºäºSDLçš„æ¸¸æˆå¼€å‘å­¦ä¹ </category>
      </categories>
      <tags>
        <tag>C++</tag>
        <tag>Xcode</tag>
        <tag>SDL</tag>
        <tag>MacOS</tag>
        <tag>M1</tag>
        <tag>æ¸¸æˆå¼€å‘</tag>
      </tags>
  </entry>
  <entry>
    <title>DevLog001_Xcodeä½¿ç”¨SDL2å®‰è£…é…ç½®(M1)</title>
    <url>/2021/04/11/DevLog001-XCode%E4%BD%BF%E7%94%A8SDL2%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AE-M1/</url>
    <content><![CDATA[<blockquote>
<p>æˆ‘çš„é…ç½®è¿‡ç¨‹ä¸»è¦å‚è€ƒäº†<a href="https://www.youtube.com/watch?v=JbsmRKi18SI">è¿™ä¸ªè§†é¢‘</a>(YouTube)ï¼Œè¿™ä¸ªè§†é¢‘å¸®æˆ‘è§£å†³äº†å¾ˆå¤šé—®é¢˜ï¼Œæ„Ÿè°¢</p>
</blockquote>
<span id="more"></span>

<h2 id="ç¢ç¢å¿µ"><a href="#ç¢ç¢å¿µ" class="headerlink" title="ç¢ç¢å¿µ"></a>ç¢ç¢å¿µ</h2><p>æˆ‘çš„è®¾å¤‡æ˜¯MacBook Air(M1)ï¼Œæœ€æ–°ç‰ˆ(æˆªè‡³æœ¬æ–‡ç¼–è¾‘)Xcodeã€‚<br>ç”±äºè¿™æ˜¯æˆ‘çš„ç¬¬ä¸€å°ä½¿ç”¨macOSçš„ç”µè„‘ï¼Œå¯¹<strong>ç­¾å</strong>ç­‰æ¦‚å¿µå¹¶ä¸ç†Ÿæ‚‰ï¼Œå±å®æµªè´¹äº†å¾ˆå¤šæ—¶é—´ã€‚<br>æ ¹æ®æˆ‘å®‰è£…é…ç½®çš„æƒ…å†µæ¥çœ‹ï¼ŒM1å¯¹äºSDL2æ¡†æ¶çš„ä½¿ç”¨å¹¶æ— å½±å“ï¼Œåœ¨æ­£ç¡®é…ç½®åï¼Œå¦‚æœå‡ºç°çª—å£æ²¡æœ‰å‡ºç°ç­‰æƒ…å†µï¼Œå¤šåŠæ˜¯ä»£ç ä¸Šçš„é”™è¯¯(è¯´çš„å°±æ˜¯æˆ‘è‡ªå·±ğŸ‘‰ğŸ¼ğŸ¤¡)ã€‚</p>
<h2 id="ä¸‹è½½å’Œå®‰è£…"><a href="#ä¸‹è½½å’Œå®‰è£…" class="headerlink" title="ä¸‹è½½å’Œå®‰è£…"></a>ä¸‹è½½å’Œå®‰è£…</h2><p>ä»<a href="http://www.libsdl.org/download-2.0.php">SDLå®˜ç½‘</a>ä¸‹è½½å¯¹åº”ç³»ç»Ÿçš„<strong>Development Libraries</strong>ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚<br><img src="/2021/04/11/DevLog001-XCode%E4%BD%BF%E7%94%A8SDL2%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AE-M1/SDL_downloadItem.png"></p>
<p>åŒå‡»æ‰“å¼€ä¸‹è½½çš„dmgæ–‡ä»¶ï¼Œå°†SDL2.frameworkæ–‡ä»¶å¤¹æ‹–å…¥Frameworksæ–‡ä»¶å¤¹é‡Œã€‚<br><img src="/2021/04/11/DevLog001-XCode%E4%BD%BF%E7%94%A8SDL2%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AE-M1/SDL_Item.png"><br>        Frameworksæ–‡ä»¶å¤¹å¯ä»¥é€šè¿‡è®¿è¾¾å‰å¾€æ–‡ä»¶å¤¹ï¼Œ<br><img src="/2021/04/11/DevLog001-XCode%E4%BD%BF%E7%94%A8SDL2%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AE-M1/SDL_finder.png"><br>        è¾“å…¥å¦‚ä¸‹:<br>        <code>/Library/Frameworks</code><br><img src="/2021/04/11/DevLog001-XCode%E4%BD%BF%E7%94%A8SDL2%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AE-M1/SDL_finder2.png"><br>        å°±OKäº†ã€‚</p>
<h2 id="Xcodeé…ç½®"><a href="#Xcodeé…ç½®" class="headerlink" title="Xcodeé…ç½®"></a>Xcodeé…ç½®</h2><h3 id="æ­¥éª¤ä¸€"><a href="#æ­¥éª¤ä¸€" class="headerlink" title="æ­¥éª¤ä¸€"></a>æ­¥éª¤ä¸€</h3><p>æ–°å»ºä¸€ä¸ªé¡¹ç›®ï¼Œé€‰æ‹©Command Line Toolï¼Œè¯­è¨€é€‰æ‹©C++ã€‚<br><img src="/2021/04/11/DevLog001-XCode%E4%BD%BF%E7%94%A8SDL2%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AE-M1/SDL_xcode1.png"><br>        é…ç½®é¡¹ç›®ï¼Œæ·»åŠ SDL2.frameworkã€‚<br><img src="/2021/04/11/DevLog001-XCode%E4%BD%BF%E7%94%A8SDL2%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AE-M1/SDL_xcode2.png"><br>        é€‰æ‹©Add Otherï¼ŒAdd fileï¼Œä»ç¡¬ç›˜/Library/Frameworkså¯ä»¥å¾ˆå®¹æ˜“åœ°æ‰¾åˆ°SDL2.frameworkæ–‡ä»¶å¤¹ã€‚<br><img src="/2021/04/11/DevLog001-XCode%E4%BD%BF%E7%94%A8SDL2%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AE-M1/SDL_xcode3.png"></p>
<h3 id="æ­¥éª¤äºŒ"><a href="#æ­¥éª¤äºŒ" class="headerlink" title="æ­¥éª¤äºŒ"></a>æ­¥éª¤äºŒ</h3><p>ç¡®ä¿æ¡†æ¶Embed&amp;Signï¼Œå¦‚æœä¸æ˜¯ï¼Œå°†å…¶ç½®ä¸ºEmbed&amp;Signã€‚<br><img src="/2021/04/11/DevLog001-XCode%E4%BD%BF%E7%94%A8SDL2%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AE-M1/SDL_xcode4.png"></p>
<h3 id="æ­¥éª¤ä¸‰"><a href="#æ­¥éª¤ä¸‰" class="headerlink" title="æ­¥éª¤ä¸‰"></a>æ­¥éª¤ä¸‰</h3><p>å¦‚å›¾ã€‚<br><img src="/2021/04/11/DevLog001-XCode%E4%BD%BF%E7%94%A8SDL2%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AE-M1/SDL_xcode6.png"></p>
<blockquote>
<p>æ³¨æ„ï¼Œè¿™ä¸ªæ–¹æ³•æ¥æºäºæˆ‘å¼€å¤´æåˆ°çš„è§†é¢‘ï¼Œæˆ‘å¯¹è¿™ä¸ªåšæ³•çš„åŸç†æš‚æ—¶è¿˜ä¸å¤ªæ¸…æ¥šã€‚<br>4æœˆ14æ—¥è¡¥å……ï¼Œè¿™ä¸€æ­¥å†åé¢å¯¼è‡´äº†ä¸€äº›é—®é¢˜ï¼Œå·²è§£å†³ã€‚</p>
</blockquote>
<h2 id="æµ‹è¯•ä»£ç "><a href="#æµ‹è¯•ä»£ç " class="headerlink" title="æµ‹è¯•ä»£ç "></a>æµ‹è¯•ä»£ç </h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#include &lt;SDL2&#x2F;SDL.h&gt;</span><br><span class="line"></span><br><span class="line">int main(int argc, const char * argv[]) &#123;</span><br><span class="line">    int sdlResult&#x3D;SDL_Init(SDL_INIT_VIDEO);</span><br><span class="line">    if(sdlResult!&#x3D;0)&#123;</span><br><span class="line">        SDL_Log(&quot;Unable to initialize SDL: %s&quot;,SDL_GetError());</span><br><span class="line">        return 1;</span><br><span class="line">    &#125;</span><br><span class="line">    &#x2F;&#x2F;åˆå§‹åŒ–çª—å£</span><br><span class="line">        SDL_Window* mWindow &#x3D; SDL_CreateWindow(&quot;Game with SDL2&quot;,&#x2F;&#x2F; window title</span><br><span class="line">                             SDL_WINDOWPOS_UNDEFINED,           &#x2F;&#x2F; initial x position</span><br><span class="line">                             SDL_WINDOWPOS_UNDEFINED,           &#x2F;&#x2F; initial y position</span><br><span class="line">                             640,                               &#x2F;&#x2F; width, in pixels</span><br><span class="line">                             480,                               &#x2F;&#x2F; height, in pixels</span><br><span class="line">                             SDL_WINDOW_OPENGL                  &#x2F;&#x2F; flags - see below</span><br><span class="line">    );</span><br><span class="line">    if(!mWindow)&#123;</span><br><span class="line">        SDL_Log(&quot;Failed to create window: %s&quot;, SDL_GetError());</span><br><span class="line">        return 1;</span><br><span class="line">    &#125;</span><br><span class="line">    bool mIsRunning &#x3D; true;</span><br><span class="line">    while(mIsRunning)&#123;</span><br><span class="line">        SDL_Event event;</span><br><span class="line">        while(SDL_PollEvent(&amp;event))&#123;</span><br><span class="line">            switch (event.type) &#123;</span><br><span class="line">                case SDL_QUIT:</span><br><span class="line">                    mIsRunning &#x3D; false;</span><br><span class="line">                    break;</span><br><span class="line">                    </span><br><span class="line">                default:</span><br><span class="line">                    break;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    SDL_DestroyWindow(mWindow);</span><br><span class="line">    SDL_Quit();</span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¦‚æœæˆåŠŸè¿è¡Œï¼Œå°±ä¼šå‡ºç°ä¸€ä¸ªåä¸ºGame with SDL2çš„çª—å£ã€‚å®ƒæŒç»­ä¿æŒæ‰“å¼€çŠ¶æ€ï¼Œç›´åˆ°ä½ å…³æ‰å®ƒã€‚</p>
<p><img src="/2021/04/11/DevLog001-XCode%E4%BD%BF%E7%94%A8SDL2%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AE-M1/SDL_result.png"></p>
<h2 id="é‡åˆ°çš„é—®é¢˜"><a href="#é‡åˆ°çš„é—®é¢˜" class="headerlink" title="é‡åˆ°çš„é—®é¢˜"></a>é‡åˆ°çš„é—®é¢˜</h2><blockquote>
<p>ğŸ‘©ğŸ»â€ğŸ’»å¦‚æœä»¥ä¸‹æ–¹æ³•æ— æ³•è§£å†³é—®é¢˜ï¼Œæˆ–è€…æ˜¯å…¶ä»–é”™è¯¯ï¼Œå°±è§¦åŠåˆ°æˆ‘çš„çŸ¥è¯†ç›²åŒºäº†ã€‚</p>
</blockquote>
<h3 id="build-failed"><a href="#build-failed" class="headerlink" title="build failed"></a>build failed</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#39;SDL2&#x2F;SDL.h&#39; file not found</span><br></pre></td></tr></table></figure>
<p>è½¬<strong>Xcodeé…ç½®.æ­¥éª¤ä¸€</strong><br>æˆ– Product -&gt; Clean build folder</p>
<blockquote>
<p>æœ‰æ—¶ä¼šåœ¨è¿è¡ŒæˆåŠŸç”Ÿæˆçª—å£åï¼Œå‡ºç°è¿™ä¸ªé”™è¯¯ï¼Œæˆ‘å¹¶ä¸æ¸…æ¥šåŸå› æ‰€åœ¨ï¼Œä¸è¿‡ç¨‹åºä»ç„¶å¯ä»¥æ­£å¸¸è¿è¡Œâ€¦â€¦å¸Œæœ›æœ‰çŸ¥é“çš„æœ‹å‹å¯ä»¥åœ¨è¯„è®ºåŒºäº¤æµä¸€ä¸‹ã€‚<br><img src="/2021/04/11/DevLog001-XCode%E4%BD%BF%E7%94%A8SDL2%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AE-M1/SDL_strangeError.png"></p>
</blockquote>
<h3 id="build-successful"><a href="#build-successful" class="headerlink" title="build successful"></a>build successful</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">dyld: Library not loaded: @rpath&#x2F;SDL2.framework&#x2F;Versions&#x2F;A&#x2F;SDL2</span><br><span class="line">  Referenced from: &#x2F;Users&#x2F;fayeke&#x2F;Library&#x2F;Developer&#x2F;Xcode&#x2F;DerivedData&#x2F;Test-exeilrliaawdqhdhujvjtueqejrg&#x2F;Build&#x2F;Products&#x2F;Debug&#x2F;Test</span><br><span class="line">  Reason: no suitable image found.  Did find:</span><br><span class="line">	&#x2F;Library&#x2F;Frameworks&#x2F;SDL2.framework&#x2F;Versions&#x2F;A&#x2F;SDL2: code signature in (&#x2F;Library&#x2F;Frameworks&#x2F;SDL2.framework&#x2F;Versions&#x2F;A&#x2F;SDL2) not valid for use in process using Library Validation: mapping process and mapped file (non-platform) have different Team IDs</span><br></pre></td></tr></table></figure>
<p>è½¬<strong>Xcodeé…ç½®.æ­¥éª¤äºŒ</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">dyld: Library not loaded: @rpath&#x2F;hidapi.framework&#x2F;Versions&#x2F;A&#x2F;hidapi</span><br><span class="line">  Referenced from: &#x2F;Users&#x2F;fayeke&#x2F;Library&#x2F;Developer&#x2F;Xcode&#x2F;DerivedData&#x2F;Test-exeilrliaawdqhdhujvjtueqejrg&#x2F;Build&#x2F;Products&#x2F;Debug&#x2F;SDL2.framework&#x2F;Versions&#x2F;A&#x2F;SDL2</span><br><span class="line">  Reason: no suitable image found.  Did find:</span><br><span class="line">	&#x2F;Users&#x2F;fayeke&#x2F;Library&#x2F;Developer&#x2F;Xcode&#x2F;DerivedData&#x2F;Test-exeilrliaawdqhdhujvjtueqejrg&#x2F;Build&#x2F;Products&#x2F;Debug&#x2F;SDL2.framework&#x2F;Versions&#x2F;A&#x2F;Frameworks&#x2F;hidapi.framework&#x2F;Versions&#x2F;A&#x2F;hidapi: code signature in (&#x2F;Users&#x2F;fayeke&#x2F;Library&#x2F;Developer&#x2F;Xcode&#x2F;DerivedData&#x2F;Test-exeilrliaawdqhdhujvjtueqejrg&#x2F;Build&#x2F;Products&#x2F;Debug&#x2F;SDL2.framework&#x2F;Versions&#x2F;A&#x2F;Frameworks&#x2F;hidapi.framework&#x2F;Versions&#x2F;A&#x2F;hidapi) not valid for use in process using Library Validation: mapping process and mapped file (non-platform) have different Team IDs</span><br></pre></td></tr></table></figure>
<p>è½¬<strong>Xcodeé…ç½®.æ­¥éª¤ä¸‰</strong></p>
]]></content>
      <categories>
        <category>åŸºäºSDLçš„æ¸¸æˆå¼€å‘å­¦ä¹ </category>
      </categories>
      <tags>
        <tag>C++</tag>
        <tag>Xcode</tag>
        <tag>SDL</tag>
        <tag>MacOS</tag>
        <tag>M1</tag>
        <tag>æ¸¸æˆå¼€å‘</tag>
      </tags>
  </entry>
</search>
